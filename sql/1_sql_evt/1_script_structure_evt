CREATE TABLE `db_upa`.`evenement` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `title` VARCHAR(200) NOT NULL,
  `descr` TEXT NULL,
  `date_begin` DATE NOT NULL,
  `date_end` DATE NOT NULL,
  `departement_id` INT NOT NULL,
  `location` VARCHAR(255) NULL,
  `level_id` INT NOT NULL,
  `category_id` INT NOT NULL,
   `type_id` INT NOT NULL,
  `gendermix_id` INT NOT NULL,
  `date_register` DATE NULL,
  `rulesfile_id` INT NULL,
  `article_id` INT NULL,
  PRIMARY KEY (`id`));


CREATE TABLE `db_upa`.`departement` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `name` VARCHAR(150) NOT NULL,
  `numdept` VARCHAR(4) NOT NULL,
  PRIMARY KEY (`id`));

CREATE TABLE `db_upa`.`level` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `name` VARCHAR(100) NOT NULL,
  `descr` VARCHAR(255) NULL,
  PRIMARY KEY (`id`));


CREATE TABLE `db_upa`.`gendermix` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `name` VARCHAR(100) NOT NULL,
  `descr` VARCHAR(255) NULL,
  PRIMARY KEY (`id`));

  CREATE TABLE `db_upa`.`evttype` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `name` VARCHAR(100) NOT NULL,
  `descr` VARCHAR(255) NULL,
  PRIMARY KEY (`id`));

CREATE TABLE `db_upa`.`evtcategory` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `name` VARCHAR(100) NOT NULL,
  `descr` VARCHAR(255) NULL,
  PRIMARY KEY (`id`));



ALTER TABLE `db_upa`.`evenement`
ADD INDEX `fk_evenement_dept_idx` (`departement_id` ASC);
ALTER TABLE `db_upa`.`evenement`
ADD CONSTRAINT `fk_evenement_dept`
  FOREIGN KEY (`departement_id`)
  REFERENCES `db_upa`.`departement` (`id`)
  ON DELETE NO ACTION
  ON UPDATE NO ACTION;


ALTER TABLE `db_upa`.`evenement`
ADD INDEX `fk_evenement_mix_idx` (`gendermix_id` ASC);
ALTER TABLE `db_upa`.`evenement`
ADD CONSTRAINT `fk_evenement_mix`
  FOREIGN KEY (`gendermix_id`)
  REFERENCES `db_upa`.`gendermix` (`idgendermix`)
  ON DELETE NO ACTION
  ON UPDATE NO ACTION;

ALTER TABLE `db_upa`.`evenement`
ADD INDEX `fk_evenement_level_idx` (`level_id` ASC);
ALTER TABLE `db_upa`.`evenement`
ADD CONSTRAINT `fk_evenement_level`
  FOREIGN KEY (`level_id`)
  REFERENCES `db_upa`.`level` (`idlevel`)
  ON DELETE NO ACTION
  ON UPDATE NO ACTION;

ALTER TABLE `db_upa`.`evenement`
ADD INDEX `fk_evenement_cat_idx` (`category_id` ASC);
ALTER TABLE `db_upa`.`evenement`
ADD CONSTRAINT `fk_evenement_cat`
  FOREIGN KEY (`category_id`)
  REFERENCES `db_upa`.`evtcategory` (`id`)
  ON DELETE NO ACTION
  ON UPDATE NO ACTION;

ALTER TABLE `db_upa`.`evenement`
ADD INDEX `fk_evenement_type_idx` (`type_id` ASC);
ALTER TABLE `db_upa`.`evenement`
ADD CONSTRAINT `fk_evenement_type`
  FOREIGN KEY (`type_id`)
  REFERENCES `db_upa`.`evttype` (`id`)
  ON DELETE NO ACTION
  ON UPDATE NO ACTION;
